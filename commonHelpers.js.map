{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '44257136-dfc34124ab45074cb7ae2d95f';\nconst URL = `https://pixabay.com/api/`;\n\nexport async function fetchImages(value, page = 1, perPage = 15) {\n  const response = await axios.get(URL, {\n    params: {\n      key: API_KEY,\n      q: value,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: perPage\n    },\n  });\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\n\nexport function renderImages(images, append = false) {\n  const gallery = document.querySelector('.gallery');\n  const galleryList = images\n    .map(image => {\n      return `<li class=\"gallery-item\">\n          <a href=\"${image.largeImageURL}\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n            <ul class=\"descr-list\">\n              <li class=\"descr-item\">\n                <p class=\"category\">Likes</p>\n                <p class=\"value\">${image.likes}</p>\n              </li>\n              <li class=\"descr-item\">\n                <p class=\"category\">Views</p>\n                <p class=\"value\">${image.views}</p>\n              </li>\n              <li class=\"descr-item\">\n                <p class=\"category\">Comments</p>\n                <p class=\"value\">${image.comments}</p>\n              </li>\n              <li class=\"descr-item\">\n                <p class=\"category\">Downloads</p>\n                <p class=\"value\">${image.downloads}</p>\n              </li>\n            </ul>\n          </a>\n          </li>\n        `;\n    })\n    .join('');\n  if (append) {\n    gallery.insertAdjacentHTML('beforeend', galleryList);\n  } else {\n    gallery.innerHTML = galleryList;\n  }\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\n\nconst form = document.querySelector('#form-search');\nconst input = document.querySelector('#input-search');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('#load-more-btn');\n\nlet currentPage = 1;\nlet totalPage = 1;\nlet currentValue = '';\n\nform.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', handleClick);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  const value = input.value.trim();\n  if (value === '') {\n    iziToast.error({\n      position: 'topRight',\n      title: 'Error',\n      message: 'Please fill out the search bar',\n    });\n    return;\n  }\n  loader.style.display = 'block';\n  gallery.innerHTML = '';\n  currentPage = 1;\n  currentValue = value;\n\n  try {\n    const data = await fetchImages(currentValue, currentPage);\n    const images = data.hits;\n\n    if (images.length === 0) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        position: 'topRight',\n        title: 'No Results',\n        message: 'Sorry... No results were found for your request',\n      });\n      form.reset();\n      return;\n    }\n    renderImages(images);\n    currentPage += 1;\n    loadMoreBtn.style.display = 'block';\n\n    if (data.totalHits < 15) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        position: 'topRight',\n        title: 'No more results',\n        message: 'Sorry... This is all we managed to find',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n\nasync function handleClick() {\n  loader.style.display = 'block';\n\n  try {\n    const data = await fetchImages(currentValue, currentPage);\n    const images = data.hits;\n    renderImages(images, true);\n    loader.style.display = 'none';\n    loadMoreBtn.style.display = 'block';\n    window.scrollBy({\n      top: 720,\n      behavior: 'smooth',\n    });\n    totalPage = Math.ceil(data.totalHits / 15);\n    if (totalPage === currentPage) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        position: 'topRight',\n        title: 'End of Results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n"],"names":["API_KEY","URL","fetchImages","value","page","perPage","axios","renderImages","images","append","gallery","galleryList","image","SimpleLightbox","form","input","loader","loadMoreBtn","currentPage","totalPage","currentValue","handleSubmit","handleClick","event","iziToast","data"],"mappings":"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"}